<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>低代码组件设计与实现 | 前端那些事儿</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/blog/logo.png">
    <link rel="manifest" href="/blog/manifest.json">
    <link rel="apple-touch-icon" href="/blog/images/icons/apple-icon-152x152.png">
    <meta name="description" content="我命由我不由天，学习吧少年">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/blog/assets/css/0.styles.f0017422.css" as="style"><link rel="preload" href="/blog/assets/js/app.d7ed97c7.js" as="script"><link rel="preload" href="/blog/assets/js/2.dec2e75d.js" as="script"><link rel="preload" href="/blog/assets/js/1.5b9e135c.js" as="script"><link rel="preload" href="/blog/assets/js/30.c5bb1b3d.js" as="script"><link rel="preload" href="/blog/assets/js/20.badbb211.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.cc7e09f3.js"><link rel="prefetch" href="/blog/assets/js/100.9b336fb7.js"><link rel="prefetch" href="/blog/assets/js/101.b3f26860.js"><link rel="prefetch" href="/blog/assets/js/102.eeb09b48.js"><link rel="prefetch" href="/blog/assets/js/103.295a03f7.js"><link rel="prefetch" href="/blog/assets/js/104.717a1120.js"><link rel="prefetch" href="/blog/assets/js/105.07d4a177.js"><link rel="prefetch" href="/blog/assets/js/106.b867c336.js"><link rel="prefetch" href="/blog/assets/js/107.30bc7c42.js"><link rel="prefetch" href="/blog/assets/js/108.483bd993.js"><link rel="prefetch" href="/blog/assets/js/109.76770490.js"><link rel="prefetch" href="/blog/assets/js/11.b60c9933.js"><link rel="prefetch" href="/blog/assets/js/110.c9a362b9.js"><link rel="prefetch" href="/blog/assets/js/111.437e19f6.js"><link rel="prefetch" href="/blog/assets/js/112.a97b06a0.js"><link rel="prefetch" href="/blog/assets/js/113.ad01063e.js"><link rel="prefetch" href="/blog/assets/js/114.a8f8f633.js"><link rel="prefetch" href="/blog/assets/js/115.028538b8.js"><link rel="prefetch" href="/blog/assets/js/116.9887f4cf.js"><link rel="prefetch" href="/blog/assets/js/117.cbe35c59.js"><link rel="prefetch" href="/blog/assets/js/118.09ac2f52.js"><link rel="prefetch" href="/blog/assets/js/119.e8238a8b.js"><link rel="prefetch" href="/blog/assets/js/12.c53283e7.js"><link rel="prefetch" href="/blog/assets/js/120.7f3948b9.js"><link rel="prefetch" href="/blog/assets/js/121.d562c136.js"><link rel="prefetch" href="/blog/assets/js/122.813f1055.js"><link rel="prefetch" href="/blog/assets/js/123.ed542f34.js"><link rel="prefetch" href="/blog/assets/js/124.ad28403f.js"><link rel="prefetch" href="/blog/assets/js/125.82ca87f4.js"><link rel="prefetch" href="/blog/assets/js/126.e4c25686.js"><link rel="prefetch" href="/blog/assets/js/127.cc3b25e8.js"><link rel="prefetch" href="/blog/assets/js/128.ded58ef7.js"><link rel="prefetch" href="/blog/assets/js/129.966c655a.js"><link rel="prefetch" href="/blog/assets/js/13.6bdc6b5d.js"><link rel="prefetch" href="/blog/assets/js/130.84505c68.js"><link rel="prefetch" href="/blog/assets/js/131.cec1f85b.js"><link rel="prefetch" href="/blog/assets/js/132.40001954.js"><link rel="prefetch" href="/blog/assets/js/133.2ebebd9b.js"><link rel="prefetch" href="/blog/assets/js/134.36c81557.js"><link rel="prefetch" href="/blog/assets/js/135.f1ec454a.js"><link rel="prefetch" href="/blog/assets/js/136.66c83721.js"><link rel="prefetch" href="/blog/assets/js/137.9f8b8dad.js"><link rel="prefetch" href="/blog/assets/js/138.988cd2bb.js"><link rel="prefetch" href="/blog/assets/js/139.2cf615e5.js"><link rel="prefetch" href="/blog/assets/js/14.c3201a23.js"><link rel="prefetch" href="/blog/assets/js/140.5c5eb828.js"><link rel="prefetch" href="/blog/assets/js/141.b51af892.js"><link rel="prefetch" href="/blog/assets/js/142.bfa62f8b.js"><link rel="prefetch" href="/blog/assets/js/143.3f55661b.js"><link rel="prefetch" href="/blog/assets/js/144.f9f516ff.js"><link rel="prefetch" href="/blog/assets/js/145.6f138c1a.js"><link rel="prefetch" href="/blog/assets/js/146.0535f35d.js"><link rel="prefetch" href="/blog/assets/js/147.aa51a883.js"><link rel="prefetch" href="/blog/assets/js/148.a4d9d839.js"><link rel="prefetch" href="/blog/assets/js/149.20920577.js"><link rel="prefetch" href="/blog/assets/js/15.a0b9e44e.js"><link rel="prefetch" href="/blog/assets/js/150.20d31db8.js"><link rel="prefetch" href="/blog/assets/js/151.8c8797d3.js"><link rel="prefetch" href="/blog/assets/js/152.d7f2d776.js"><link rel="prefetch" href="/blog/assets/js/153.e2cc8151.js"><link rel="prefetch" href="/blog/assets/js/154.f1652a62.js"><link rel="prefetch" href="/blog/assets/js/155.b19acae0.js"><link rel="prefetch" href="/blog/assets/js/156.e9c9ed76.js"><link rel="prefetch" href="/blog/assets/js/157.3253a5d0.js"><link rel="prefetch" href="/blog/assets/js/158.3f2ba030.js"><link rel="prefetch" href="/blog/assets/js/159.bd59b2f5.js"><link rel="prefetch" href="/blog/assets/js/16.491191e4.js"><link rel="prefetch" href="/blog/assets/js/160.1a686de4.js"><link rel="prefetch" href="/blog/assets/js/161.4e0b6f98.js"><link rel="prefetch" href="/blog/assets/js/162.c0650f65.js"><link rel="prefetch" href="/blog/assets/js/163.ec3b78ac.js"><link rel="prefetch" href="/blog/assets/js/164.d21dfff7.js"><link rel="prefetch" href="/blog/assets/js/165.f930cb5f.js"><link rel="prefetch" href="/blog/assets/js/166.1144a3b5.js"><link rel="prefetch" href="/blog/assets/js/167.d9f85a7a.js"><link rel="prefetch" href="/blog/assets/js/168.196a44b6.js"><link rel="prefetch" href="/blog/assets/js/169.bf573f56.js"><link rel="prefetch" href="/blog/assets/js/17.89ec8c57.js"><link rel="prefetch" href="/blog/assets/js/170.9971d5ae.js"><link rel="prefetch" href="/blog/assets/js/171.35d1ba8d.js"><link rel="prefetch" href="/blog/assets/js/172.9bd9c064.js"><link rel="prefetch" href="/blog/assets/js/173.de70e5d2.js"><link rel="prefetch" href="/blog/assets/js/174.8888c1f8.js"><link rel="prefetch" href="/blog/assets/js/175.e6465260.js"><link rel="prefetch" href="/blog/assets/js/176.027707dc.js"><link rel="prefetch" href="/blog/assets/js/177.e066f5f3.js"><link rel="prefetch" href="/blog/assets/js/178.850415f0.js"><link rel="prefetch" href="/blog/assets/js/179.c11070c0.js"><link rel="prefetch" href="/blog/assets/js/18.b91f1411.js"><link rel="prefetch" href="/blog/assets/js/180.f67ffd4c.js"><link rel="prefetch" href="/blog/assets/js/181.8528bfeb.js"><link rel="prefetch" href="/blog/assets/js/182.54743558.js"><link rel="prefetch" href="/blog/assets/js/183.f7a6ea25.js"><link rel="prefetch" href="/blog/assets/js/184.1f5959df.js"><link rel="prefetch" href="/blog/assets/js/185.1d105f97.js"><link rel="prefetch" href="/blog/assets/js/186.77a337c1.js"><link rel="prefetch" href="/blog/assets/js/187.3bbd3ebb.js"><link rel="prefetch" href="/blog/assets/js/188.20d5d95a.js"><link rel="prefetch" href="/blog/assets/js/189.243f4482.js"><link rel="prefetch" href="/blog/assets/js/19.cb1f17c8.js"><link rel="prefetch" href="/blog/assets/js/190.2a570e90.js"><link rel="prefetch" href="/blog/assets/js/191.ebc7021d.js"><link rel="prefetch" href="/blog/assets/js/192.d64c7526.js"><link rel="prefetch" href="/blog/assets/js/193.afe5f5e6.js"><link rel="prefetch" href="/blog/assets/js/194.b39b2183.js"><link rel="prefetch" href="/blog/assets/js/195.7abe4d78.js"><link rel="prefetch" href="/blog/assets/js/196.fada8913.js"><link rel="prefetch" href="/blog/assets/js/197.6fbcf396.js"><link rel="prefetch" href="/blog/assets/js/198.4ff82464.js"><link rel="prefetch" href="/blog/assets/js/199.c1deed3a.js"><link rel="prefetch" href="/blog/assets/js/200.1748ffa7.js"><link rel="prefetch" href="/blog/assets/js/201.b1e95257.js"><link rel="prefetch" href="/blog/assets/js/202.7a52de85.js"><link rel="prefetch" href="/blog/assets/js/203.88138866.js"><link rel="prefetch" href="/blog/assets/js/204.e6d2f17b.js"><link rel="prefetch" href="/blog/assets/js/205.650b8efa.js"><link rel="prefetch" href="/blog/assets/js/206.11376430.js"><link rel="prefetch" href="/blog/assets/js/207.500b316a.js"><link rel="prefetch" href="/blog/assets/js/208.bddce877.js"><link rel="prefetch" href="/blog/assets/js/209.57413f4b.js"><link rel="prefetch" href="/blog/assets/js/21.bf0041b7.js"><link rel="prefetch" href="/blog/assets/js/210.a0a44e1e.js"><link rel="prefetch" href="/blog/assets/js/211.8e9ab64a.js"><link rel="prefetch" href="/blog/assets/js/212.17214657.js"><link rel="prefetch" href="/blog/assets/js/213.e33a2abb.js"><link rel="prefetch" href="/blog/assets/js/214.d53d39fa.js"><link rel="prefetch" href="/blog/assets/js/215.7d8e6a0e.js"><link rel="prefetch" href="/blog/assets/js/216.3407e98e.js"><link rel="prefetch" href="/blog/assets/js/217.55493374.js"><link rel="prefetch" href="/blog/assets/js/218.635334cf.js"><link rel="prefetch" href="/blog/assets/js/219.1c46332e.js"><link rel="prefetch" href="/blog/assets/js/22.48390d4f.js"><link rel="prefetch" href="/blog/assets/js/220.ebc569c6.js"><link rel="prefetch" href="/blog/assets/js/221.a859e2c2.js"><link rel="prefetch" href="/blog/assets/js/222.0c7fe13e.js"><link rel="prefetch" href="/blog/assets/js/223.7df0d70a.js"><link rel="prefetch" href="/blog/assets/js/224.5c5fb749.js"><link rel="prefetch" href="/blog/assets/js/225.e09e4d9d.js"><link rel="prefetch" href="/blog/assets/js/226.3043cac7.js"><link rel="prefetch" href="/blog/assets/js/227.4e115357.js"><link rel="prefetch" href="/blog/assets/js/23.35c4ba93.js"><link rel="prefetch" href="/blog/assets/js/24.cc3b12df.js"><link rel="prefetch" href="/blog/assets/js/25.632a83cc.js"><link rel="prefetch" href="/blog/assets/js/26.574f1fc1.js"><link rel="prefetch" href="/blog/assets/js/27.ee3c36ec.js"><link rel="prefetch" href="/blog/assets/js/28.2598e102.js"><link rel="prefetch" href="/blog/assets/js/29.6ed063e8.js"><link rel="prefetch" href="/blog/assets/js/3.cb0627fa.js"><link rel="prefetch" href="/blog/assets/js/31.6ae5d6bc.js"><link rel="prefetch" href="/blog/assets/js/32.63714a18.js"><link rel="prefetch" href="/blog/assets/js/33.0a98d657.js"><link rel="prefetch" href="/blog/assets/js/34.66a4b69e.js"><link rel="prefetch" href="/blog/assets/js/35.efc8ebcf.js"><link rel="prefetch" href="/blog/assets/js/36.28b482d2.js"><link rel="prefetch" href="/blog/assets/js/37.0c70a804.js"><link rel="prefetch" href="/blog/assets/js/38.7b2228d8.js"><link rel="prefetch" href="/blog/assets/js/39.2bc990cf.js"><link rel="prefetch" href="/blog/assets/js/4.cbb57fa7.js"><link rel="prefetch" href="/blog/assets/js/40.5be60d0e.js"><link rel="prefetch" href="/blog/assets/js/41.7524bbf0.js"><link rel="prefetch" href="/blog/assets/js/42.714adee0.js"><link rel="prefetch" href="/blog/assets/js/43.718a9ac3.js"><link rel="prefetch" href="/blog/assets/js/44.cdf11766.js"><link rel="prefetch" href="/blog/assets/js/45.b9f73462.js"><link rel="prefetch" href="/blog/assets/js/46.070617b5.js"><link rel="prefetch" href="/blog/assets/js/47.45dbd8ee.js"><link rel="prefetch" href="/blog/assets/js/48.a5d36e11.js"><link rel="prefetch" href="/blog/assets/js/49.03e700f2.js"><link rel="prefetch" href="/blog/assets/js/5.fe065607.js"><link rel="prefetch" href="/blog/assets/js/50.edafa678.js"><link rel="prefetch" href="/blog/assets/js/51.6e2290a8.js"><link rel="prefetch" href="/blog/assets/js/52.c109d7d5.js"><link rel="prefetch" href="/blog/assets/js/53.50675a1d.js"><link rel="prefetch" href="/blog/assets/js/54.0afdb68d.js"><link rel="prefetch" href="/blog/assets/js/55.f9013f21.js"><link rel="prefetch" href="/blog/assets/js/56.e7ca6c14.js"><link rel="prefetch" href="/blog/assets/js/57.8b42df8f.js"><link rel="prefetch" href="/blog/assets/js/58.7b68fa2c.js"><link rel="prefetch" href="/blog/assets/js/59.e276f401.js"><link rel="prefetch" href="/blog/assets/js/6.68cda050.js"><link rel="prefetch" href="/blog/assets/js/60.4add09d0.js"><link rel="prefetch" href="/blog/assets/js/61.0fe45890.js"><link rel="prefetch" href="/blog/assets/js/62.66b58176.js"><link rel="prefetch" href="/blog/assets/js/63.adc3ee7b.js"><link rel="prefetch" href="/blog/assets/js/64.590e5a37.js"><link rel="prefetch" href="/blog/assets/js/65.bfebad49.js"><link rel="prefetch" href="/blog/assets/js/66.281a5ac4.js"><link rel="prefetch" href="/blog/assets/js/67.3b13d2f2.js"><link rel="prefetch" href="/blog/assets/js/68.e53606db.js"><link rel="prefetch" href="/blog/assets/js/69.2059be22.js"><link rel="prefetch" href="/blog/assets/js/7.3b8d63a0.js"><link rel="prefetch" href="/blog/assets/js/70.c7774f34.js"><link rel="prefetch" href="/blog/assets/js/71.559dfdd3.js"><link rel="prefetch" href="/blog/assets/js/72.cbac4235.js"><link rel="prefetch" href="/blog/assets/js/73.aa1efffb.js"><link rel="prefetch" href="/blog/assets/js/74.de2cf5f9.js"><link rel="prefetch" href="/blog/assets/js/75.d9244242.js"><link rel="prefetch" href="/blog/assets/js/76.93d6b837.js"><link rel="prefetch" href="/blog/assets/js/77.c82da724.js"><link rel="prefetch" href="/blog/assets/js/78.4e6d4811.js"><link rel="prefetch" href="/blog/assets/js/79.0f4aac22.js"><link rel="prefetch" href="/blog/assets/js/80.6a6b99e8.js"><link rel="prefetch" href="/blog/assets/js/81.712bd61b.js"><link rel="prefetch" href="/blog/assets/js/82.181cda89.js"><link rel="prefetch" href="/blog/assets/js/83.7ab5ac5b.js"><link rel="prefetch" href="/blog/assets/js/84.6bbbb8d2.js"><link rel="prefetch" href="/blog/assets/js/85.4adfb728.js"><link rel="prefetch" href="/blog/assets/js/86.2121d070.js"><link rel="prefetch" href="/blog/assets/js/87.e8c62457.js"><link rel="prefetch" href="/blog/assets/js/88.93dd4fca.js"><link rel="prefetch" href="/blog/assets/js/89.a93de9cf.js"><link rel="prefetch" href="/blog/assets/js/90.d4170ea4.js"><link rel="prefetch" href="/blog/assets/js/91.9bc2590d.js"><link rel="prefetch" href="/blog/assets/js/92.e94d0ec0.js"><link rel="prefetch" href="/blog/assets/js/93.3f378b31.js"><link rel="prefetch" href="/blog/assets/js/94.b567445f.js"><link rel="prefetch" href="/blog/assets/js/95.708acdfa.js"><link rel="prefetch" href="/blog/assets/js/96.fe23b2db.js"><link rel="prefetch" href="/blog/assets/js/97.2301b9cf.js"><link rel="prefetch" href="/blog/assets/js/98.6c7c4ab4.js"><link rel="prefetch" href="/blog/assets/js/99.974edfb7.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.bd3cdb54.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.f0017422.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.png" alt="前端那些事儿" class="logo"> <span class="site-name can-hide">前端那些事儿</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/base/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/blog/devops/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/blog/mobile/" class="nav-link">
  泛客户端
</a></div><div class="nav-item"><a href="/blog/architecture/" class="nav-link router-link-active">
  架构与方案
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jonny-wei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/jonny-wei/sushi-js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS 寿司
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/base/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/blog/devops/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/blog/mobile/" class="nav-link">
  泛客户端
</a></div><div class="nav-item"><a href="/blog/architecture/" class="nav-link router-link-active">
  架构与方案
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jonny-wei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/jonny-wei/sushi-js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS 寿司
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端架构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/architecture/" aria-current="page" class="sidebar-link">渲染模式通识</a></li><li><a href="/blog/architecture/framework/Islands.html" class="sidebar-link">了解 Islands 架构</a></li><li><a href="/blog/architecture/framework/micro-frontend.html" class="sidebar-link">微前端架构</a></li><li><a href="/blog/architecture/framework/shadowbox.html" class="sidebar-link">微前端的沙箱设计</a></li><li><a href="/blog/architecture/framework/icestark.html" class="sidebar-link">iceStack 架构设计</a></li><li><a href="/blog/architecture/framework/wujie.html" class="sidebar-link">iframe 微前端方案</a></li><li><a href="/blog/architecture/framework/lowcode-components.html" aria-current="page" class="active sidebar-link">低代码组件设计与实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/architecture/framework/lowcode-components.html#组件描述" class="sidebar-link">组件描述</a></li><li class="sidebar-sub-header"><a href="/blog/architecture/framework/lowcode-components.html#组件消费方式" class="sidebar-link">组件消费方式</a></li><li class="sidebar-sub-header"><a href="/blog/architecture/framework/lowcode-components.html#脚手架" class="sidebar-link">脚手架</a></li><li class="sidebar-sub-header"><a href="/blog/architecture/framework/lowcode-components.html#组件开发" class="sidebar-link">组件开发</a></li><li class="sidebar-sub-header"><a href="/blog/architecture/framework/lowcode-components.html#自动低代化" class="sidebar-link">自动低代化</a></li></ul></li><li><a href="/blog/architecture/framework/lowcode-engine.html" class="sidebar-link">低代码引擎设计与实现</a></li><li><a href="/blog/architecture/framework/ali-lowcode-engine.html" class="sidebar-link">Ali-lowcode-engine</a></li><li><a href="/blog/architecture/framework/materialin-engine.html" class="sidebar-link">入料引擎</a></li><li><a href="/blog/architecture/framework/choreography-engine.html" class="sidebar-link">编排引擎</a></li><li><a href="/blog/architecture/framework/lowcode-extend.html" class="sidebar-link">低代码扩展点</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端方案</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/architecture/plan/i18n.html" class="sidebar-link">国际化探索实践</a></li><li><a href="/blog/architecture/plan/color-thief.html" class="sidebar-link">图片主题色智能提取</a></li><li><a href="/blog/architecture/plan/pay.html" class="sidebar-link">三方支付与收银台</a></li><li><a href="/blog/architecture/plan/tracker.html" class="sidebar-link">积分任务与埋点</a></li><li><a href="/blog/architecture/plan/virtual-list.html" class="sidebar-link">无限滚动虚拟列表</a></li><li><a href="/blog/architecture/plan/masonry.html" class="sidebar-link">瀑布流虚拟列表实践</a></li><li><a href="/blog/architecture/plan/file-transfer.html" class="sidebar-link">大文件上传</a></li><li><a href="/blog/architecture/plan/webTransport.html" class="sidebar-link">WebTransport</a></li><li><a href="/blog/architecture/plan/webCodecs.html" class="sidebar-link">WebCodecs</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="低代码组件设计与实现"><a href="#低代码组件设计与实现" class="header-anchor">#</a> 低代码组件设计与实现</h1> <p>低代码组件一般由两部分组成：</p> <ul><li>组件描述：对源码组件在低代码搭建平台中使用时所具备的配置能力和交互行为进行规范化描述，让不同平台对组件接入的实现保持一致，让组件针对不同的搭建平台接入时可以使用一份统一的描述内容，让组件在不同的业务中流通成为可能。</li> <li>组件实现：源码组件针对低代码的实现，比如针对业务场景，定制低代码或者零代码的组件。</li></ul> <h2 id="组件描述"><a href="#组件描述" class="header-anchor">#</a> 组件描述</h2> <p>单个组件描述内容为 json 结构，主要包含以下三部分内容，分别为：</p> <ul><li>基础信息： 描述组件的基础信息，通常包含包信息、组件名称、标题、描述等。</li> <li>组件属性信息： 描述组件属性信息，通常包含参数、说明、类型、默认值 4 项内容。</li> <li>能力配置/体验增强： 推荐用于优化搭建产品编辑体验，定制编辑能力的配置信息。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;componentName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MyCustomComponent&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 组件名称</span>
  <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我的自定义组件&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 组件标题</span>
  <span class="token string-property property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;这是一个示例自定义组件，用于展示如何配置低代码组件。&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 组件描述</span>
  <span class="token string-property property">&quot;docUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://example.com/docs/my-custom-component&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 组件文档链接</span>
  <span class="token string-property property">&quot;screenshot&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://example.com/images/my-custom-component.png&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 组件截图</span>
  <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://example.com/icons/my-custom-component-icon.png&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 组件图标</span>
  <span class="token string-property property">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;自定义&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;示例&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 组件标签</span>
  <span class="token string-property property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;example&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 关键词</span>
  <span class="token string-property property">&quot;devMode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lowCode&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 开发模式，这里是 lowCode</span>
  <span class="token string-property property">&quot;npm&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// NPM包信息</span>
    <span class="token string-property property">&quot;package&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@myorg/my-custom-component&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 源码组件库名</span>
    <span class="token string-property property">&quot;exportName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MyCustomComponent&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 源码组件名称</span>
    <span class="token string-property property">&quot;subName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 子组件名（如果有）</span>
    <span class="token string-property property">&quot;destructuring&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 是否解构</span>
    <span class="token string-property property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lib/index.js&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 组件路径</span>
    <span class="token string-property property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span>  <span class="token comment">// 源码组件版本号</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;props&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>  <span class="token comment">// 组件属性列表</span>
    <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 属性名</span>
      <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 属性类型</span>
      <span class="token string-property property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;显示的文本内容&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 属性描述</span>
      <span class="token string-property property">&quot;defaultValue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello, World!&quot;</span>  <span class="token comment">// 默认值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 属性名</span>
      <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 属性类型</span>
      <span class="token string-property property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;文本颜色&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 属性描述</span>
      <span class="token string-property property">&quot;defaultValue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#000000&quot;</span>  <span class="token comment">// 默认值</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;configure&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 配置项</span>
    <span class="token string-property property">&quot;props&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>  <span class="token comment">// 属性面板配置</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 面板配置隶属于单个 field</span>
        <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 设置字段名</span>
        <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;文本内容&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 字段标题</span>
        <span class="token string-property property">&quot;setter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 单个属性的 setter 配置</span>
          <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;StringSetter&quot;</span>  <span class="token comment">// 设置器类型</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 面板配置隶属于单个 field</span>
        <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 设置字段名</span>
        <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;文本颜色&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 字段标题</span>
        <span class="token string-property property">&quot;setter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 单个属性的 setter 配置</span>
          <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ColorSetter&quot;</span>  <span class="token comment">// 设置器类型</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;group&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 面板配置隶属于分组</span>
        <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;styleGroup&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 分组名</span>
        <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;样式设置&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 分组标题</span>
        <span class="token string-property property">&quot;items&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>  <span class="token comment">// 分组内的设置项</span>
          <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 面板配置隶属于单个 field</span>
            <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fontSize&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 设置字段名</span>
            <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;字体大小&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 字段标题</span>
            <span class="token string-property property">&quot;setter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 单个属性的 setter 配置</span>
              <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NumberSetter&quot;</span>  <span class="token comment">// 设置器类型</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 面板配置隶属于单个 field</span>
            <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;backgroundColor&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 设置字段名</span>
            <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;背景颜色&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 字段标题</span>
            <span class="token string-property property">&quot;setter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 单个属性的 setter 配置</span>
              <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ColorSetter&quot;</span>  <span class="token comment">// 设置器类型</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;component&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 组件能力配置</span>
      <span class="token string-property property">&quot;isContainer&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 是否容器组件</span>
      <span class="token string-property property">&quot;isModal&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 组件是否带浮层</span>
      <span class="token string-property property">&quot;isNullNode&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 是否存在渲染的根节点</span>
      <span class="token string-property property">&quot;descriptor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;这是一个简单的自定义组件&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 组件树描述信息</span>
      <span class="token string-property property">&quot;nestingRule&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 嵌套控制规则</span>
        <span class="token string-property property">&quot;parentWhitelist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Container&quot;</span><span class="token punctuation">]</span>  <span class="token comment">// 允许的父组件白名单</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;isMinimalRenderUnit&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 是否是最小渲染单元</span>
      <span class="token string-property property">&quot;rootSelector&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.my-custom-component-root&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 组件选中框的 cssSelector</span>
      <span class="token string-property property">&quot;disableBehaviors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;remove&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 禁用的行为</span>
      <span class="token string-property property">&quot;actions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>  <span class="token comment">// 用于详细配置上述操作项的内容</span>
        <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;copy&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 操作类型</span>
          <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;复制组件&quot;</span>  <span class="token comment">// 操作标题</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;move&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 操作类型</span>
          <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;移动组件&quot;</span>  <span class="token comment">// 操作标题</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;supports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 通用扩展面板支持性配置</span>
      <span class="token string-property property">&quot;events&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>  <span class="token comment">// 支持事件列表</span>
        <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;onClick&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 事件名</span>
          <span class="token string-property property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;点击事件&quot;</span>  <span class="token comment">// 事件描述</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;className&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 支持 className 设置</span>
      <span class="token string-property property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 支持样式设置</span>
      <span class="token string-property property">&quot;lifecycles&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 支持生命周期设置</span>
      <span class="token string-property property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 支持循环设置</span>
      <span class="token string-property property">&quot;condition&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// 支持条件式渲染设置</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;advanced&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 高级特性配置</span>
      <span class="token string-property property">&quot;context&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 上下文</span>
        <span class="token string-property property">&quot;theme&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dark&quot;</span>  <span class="token comment">// 上下文信息</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;view&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 视图</span>
        <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ReactElement&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 视图类型</span>
        <span class="token string-property property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;div&gt;预览视图&lt;/div&gt;&quot;</span>  <span class="token comment">// 视图内容</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;transducers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 转换器</span>
      <span class="token string-property property">&quot;filters&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 过滤器</span>
      <span class="token string-property property">&quot;autoruns&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 自动运行</span>
      <span class="token string-property property">&quot;callbacks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 回调</span>
        <span class="token string-property property">&quot;onNodeAdd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;function(node) { console.log('节点添加', node); }&quot;</span>  <span class="token comment">// 节点添加时的回调</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;initialChildren&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>  <span class="token comment">// 拖入容器时，自动带入 children 列表</span>
        <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;componentName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Text&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 子组件名称</span>
          <span class="token string-property property">&quot;props&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 子组件属性</span>
            <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;初始子节点&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;isAbsoluteLayoutContainer&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 是否是绝对布局容器</span>
      <span class="token string-property property">&quot;hideSelectTools&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 是否隐藏选择工具</span>
      <span class="token string-property property">&quot;getResizingHandlers&quot;</span><span class="token operator">:</span> <span class="token string">&quot;function(currentNode) { return [{ type: 'N', appearOn: 'mouse-hover' }, { type: 'S', appearOn: 'mouse-hover' }]; }&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 获取调整大小的处理程序</span>
      <span class="token string-property property">&quot;liveTextEditing&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>  <span class="token comment">// 实时文本编辑</span>
        <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.editable-text&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 选择器</span>
          <span class="token string-property property">&quot;propName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span>  <span class="token comment">// 属性名</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;snippets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>  <span class="token comment">// 代码片段</span>
    <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;基本示例&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 片段标题</span>
      <span class="token string-property property">&quot;screenshot&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://example.com/images/snippet-basic.png&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 片段截图</span>
      <span class="token string-property property">&quot;schema&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 待插入的 schema</span>
        <span class="token string-property property">&quot;componentName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MyCustomComponent&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;props&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;示例文本&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ff0000&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;复杂示例&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 片段标题</span>
      <span class="token string-property property">&quot;screenshot&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://example.com/images/snippet-advanced.png&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 片段截图</span>
      <span class="token string-property property">&quot;schema&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 待插入的 schema</span>
        <span class="token string-property property">&quot;componentName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MyCustomComponent&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;props&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;复杂示例文本&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#0000ff&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;fontSize&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ffffff&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Custom&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 组件所在的组</span>
  <span class="token string-property property">&quot;category&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Basic&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 组件所在的类别</span>
  <span class="token string-property property">&quot;priority&quot;</span><span class="token operator">:</span> <span class="token number">10</span>  <span class="token comment">// 组件在同一类别中的优先级</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br></div></div><h2 id="组件消费方式"><a href="#组件消费方式" class="header-anchor">#</a> 组件消费方式</h2> <p>低代码组件最终被发布成npm包供低代码平台消费，组件被如何消费，取决于组件提供了哪些消费方式。组件有静态导入和动态加载这两种消费方式。</p> <ul><li>静态导入：使用ES6规范引入import关键字导入组件，该规范要求组件是一个ES6规范的模块。静态导入适用于导入确定的模块。</li> <li>动态加载：动态加载指的是程序运行过程中按需加载组件。浏览器自身支持的动态加载有两种。第一种是动态嵌入脚本标签，引用远程资源的URL，例如JavaScript或CSS文件；第二种是ES动态导入，用法是import('模块路径')。</li></ul> <p>组件如何被消费？这里有一个不得不谈的问题：组件被打包成什么样的模块格式?</p> <ul><li>UMD: 主要用来解决CommonJS规范和AMD规范不能通用的问题，同时还支持老式的全局变量。先判断是否存在exports和module，存在则认为这是CommonJS模块。再判断是否有define函数并且define.amd是否为真，有define函数且define.amd为真则认为这是AMD模块。如果前两步都不满足，则将模块公开到全局。</li> <li>ESM: 导入ES模块用到的关键字是import，它根据模块路径将模块导入当前模块，模块路径又称模块说明符。模块说明符一共有3种类型，分别是相对路径、绝对路径和bare（裸露）模式。。</li></ul> <p>从组件模块的打包结果来看，它不仅有一个index.min.js文件，还有一个index.esm.js文件，前者是符合UMD规范的模块，后者是符合ES modules规范的模块。</p> <h2 id="脚手架"><a href="#脚手架" class="header-anchor">#</a> 脚手架</h2> <p>为了让开发者快速创建低代码组件，我们需要一个脚手架工具，它可以自动生成组件的基本结构和配置文件。</p> <ol><li><p>可执行的命令</p> <p>在项目的package.json文件中添加一个bin字段。这个字段会定义一个命令到文件的映射，这样当用户全局安装你的脚手架工具时，可以通过命令行直接执行。</p></li> <li><p>交互数据收集</p> <p>当用户开始创建一个新的项目时，你需要收集一些必要的信息，比如组件的英文名、中文名等。这可以通过命令行交互来实现。使用prompts库，你可以创建一个交互式的命令行界面，引导用户输入所需的信息。在用户输入信息后，你需要对这些数据进行格式化和验证。例如，使用validate-npm-package-name库来检查组件名是否符合npm包名的规范。</p></li> <li><p>项目模板下载</p></li></ol> <p>一旦收集了用户的数据，下一步是下载项目模板。你可以使用download-git-repo库来从GitHub等代码托管平台下载模板。你需要指定模板的仓库地址，并指定下载到本地的路径</p> <ol start="4"><li>模板引擎</li></ol> <p>下载模板后，你需要使用模板引擎来替换模板中的占位符。handlebars是一个流行的模板引擎，可以用来完成这个任务。你将使用用户之前输入的数据，通过模板引擎替换模板文件中的相应占位符，从而生成个性化的项目结构。</p> <ol start="5"><li>抽象语法树</li></ol> <p>如果你的脚手架需要处理JavaScript或TypeScript代码，你可能需要使用抽象语法树（AST）来分析和修改代码。用转换之后的抽象语法树生成源代码。</p> <ol start="6"><li>文件系统操作</li></ol> <p>最后，你需要使用文件系统操作库，例如fs-extra，来完成文件的创建、复制、重命名等操作。</p> <p>组件开发脚手架的核心功能是创建一个新的项目，它需要收集用户的输入，下载模板，替换占位符，生成项目结构，并完成一些必要的文件操作。</p> <h2 id="组件开发"><a href="#组件开发" class="header-anchor">#</a> 组件开发</h2> <p>组件开发需要注意以下几个方面：</p> <ul><li>组件描述：给 props 接口中的字段写注释，这不仅可以生成对使用者友好的组件文档，还可以生成组件描述。</li> <li>组件实例：组件需要接收 Ref，并将其绑定到组件的根 dom 节点上，这是为了在设计态时拖曳组件能计算出组件的插入位置。</li> <li>属性设置器：属性设置器是一个React组件，低代码使用者用引擎设计App时，设置器为他们提供修改组件属性值的接口，使用体验如同填写表单。属性设置器接收的value是属性的当前值，onChange用来修改属性的当前值。</li> <li>测试与发布：组件编写单元测试，发布到 NPM。使用 npm 的 CDN 托管服务，比如 unpkg，用包名+版本号拼接出组件资源的URL。</li></ul> <h2 id="自动低代化"><a href="#自动低代化" class="header-anchor">#</a> 自动低代化</h2> <p>自动生成低代码组件的核心是通过分析组件的源码，提取出组件的属性、事件、样式等信息，然后生成低代码组件的描述文件。</p> <p>下面是一个简易的 <code>lowcode-material-parser</code> 核心实现：</p> <ul><li>对SourceFile进行语义分析。</li> <li>用react-docgen-typescript得到componentInfo。</li> <li>处理componentInfo的props字段，处理的字段有属性的默认值、属性的数据类型和属性设置器。
<ul><li>属性的默认值：由于组件规格最终被保存到JSON文件中，因此它必须是可JSON序列化的。扫描组件源码之后，函数将被转换成字符串的形式，TypeScript代码不能直接在浏览器中运行，还要调用typescript模块的编译器API将TypeScript代码转换成JavaScript代码</li> <li>属性的数据类型：用一个大的条件判断语句去处理各种取值。propType的取值参考了prop-types包导出的各个类型。</li> <li>属性设置器：设置器的取值由属性的数据类型决定，比如，字符串属性的设置器为StringSetter。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'path'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">'fs-extra'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> parse <span class="token keyword">from</span> <span class="token string">'./parse/index'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">componentAbsolutePath</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">workDir</span><span class="token operator">:</span> string<span class="token punctuation">,</span> tsconfigFileName<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> componentDoc <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span>componentAbsolutePath<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> componentConfig <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token string">'0.0.0'</span><span class="token punctuation">,</span> description<span class="token punctuation">,</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span> <span class="token function">resolve</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'package.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">'utf-8'</span><span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// 如果该组件能接受 children 属性就说明它是容器组件</span>
    <span class="token keyword">const</span> isContainer <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>componentDoc<span class="token punctuation">.</span>props<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">prop</span> <span class="token operator">=&gt;</span> prop<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'children'</span><span class="token punctuation">)</span>
    <span class="token comment">// children 不在属性面板中配置，而是从组件面板中拖入，所以这里去掉 children 属性</span>
    componentDoc<span class="token punctuation">.</span>props <span class="token operator">=</span> isContainer <span class="token operator">?</span> componentDoc<span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">prop</span> <span class="token operator">=&gt;</span> prop<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'children'</span><span class="token punctuation">)</span><span class="token operator">:</span> componentDoc<span class="token punctuation">.</span>props
    <span class="token comment">// 该组件是否能接受样式</span>
    <span class="token keyword">const</span> isSupportStyle <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>componentDoc<span class="token punctuation">.</span>props<span class="token operator">||</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">prop</span> <span class="token operator">=&gt;</span> prop<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'style'</span><span class="token punctuation">)</span>
    <span class="token comment">// 样式在属性面板中配置，而是在样式面板中配置，所以这里去掉 style 属性</span>
    componentDoc<span class="token punctuation">.</span>props <span class="token operator">=</span> isContainer <span class="token operator">?</span> componentDoc<span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">prop</span> <span class="token operator">=&gt;</span> prop<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'style'</span><span class="token punctuation">)</span><span class="token operator">:</span> componentDoc<span class="token punctuation">.</span>props

    <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">componentName</span><span class="token operator">:</span> componentConfig<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
          <span class="token literal-property property">packageName</span><span class="token operator">:</span> name<span class="token punctuation">,</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> componentConfig<span class="token punctuation">.</span>title <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
          <span class="token literal-property property">iconUrl</span><span class="token operator">:</span> componentConfig<span class="token punctuation">.</span>iconUrl <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
          description<span class="token punctuation">,</span>
          <span class="token literal-property property">docUrl</span><span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://unpkg.com/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>version<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/docs/index.html</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">version</span><span class="token operator">:</span> version<span class="token punctuation">,</span>
          <span class="token literal-property property">props</span><span class="token operator">:</span> componentDoc<span class="token punctuation">.</span>props <span class="token operator">?</span> componentDoc<span class="token punctuation">.</span>props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token comment">// &quot;base&quot;|&quot;layout&quot;|&quot;subjoin&quot;，描述该组件位于组件面板中哪个区域</span>
          <span class="token literal-property property">group</span><span class="token operator">:</span> <span class="token string">'subjoin'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">advanced</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 组件的嵌套规则</span>
            <span class="token literal-property property">nestingRule</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 父级组件白名单</span>
              <span class="token comment">// 非容器组件必须放置在容器组件中</span>
              <span class="token literal-property property">parentWhitelist</span><span class="token operator">:</span> isContainer <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">'Page'</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Layout-*'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token comment">// 子组件白名单。</span>
              <span class="token comment">// 空数组则说明其他组件不能放置在该组件中, undefined 则说明其他组件能放置在该组件中</span>
              <span class="token literal-property property">childWhitelist</span><span class="token operator">:</span> isContainer <span class="token operator">?</span> <span class="token keyword">undefined</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">supports</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 是否能配置样式</span>
              <span class="token literal-property property">styles</span><span class="token operator">:</span> isSupportStyle<span class="token punctuation">,</span>
              <span class="token comment">// 是否能配置校验规则</span>
              <span class="token literal-property property">validation</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token comment">// 是否能配置联动规则</span>
              <span class="token literal-property property">linkage</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token comment">// 支持的事件列表，空数组意味着不支持任何事件</span>
              <span class="token literal-property property">events</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 是否是容器</span>
              <span class="token literal-property property">isContainer</span><span class="token operator">:</span> isContainer<span class="token punctuation">,</span>
              <span class="token comment">// 容器类型，非必填，可选值：‘Layout’、‘Data’、‘Page’</span>
              <span class="token literal-property property">containerType</span><span class="token operator">:</span> isContainer <span class="token operator">?</span> <span class="token string">'Layout'</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
              <span class="token comment">// 是否是表单组件</span>
              <span class="token literal-property property">isFormControl</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
             <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><p>核心的解析器是 <code>parse/index.ts</code>，它会解析组件的源码，提取出组件的属性信息。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> findConfig <span class="token keyword">from</span> <span class="token string">'find-config'</span><span class="token punctuation">;</span> <span class="token comment">// 用于查找项目中的配置文件，如tsconfig.json</span>
<span class="token keyword">import</span> ts <span class="token keyword">from</span> <span class="token string">'typescript'</span><span class="token punctuation">;</span> <span class="token comment">// TypeScript的类型定义和API</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Parser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-docgen-typescript'</span><span class="token punctuation">;</span> <span class="token comment">// 用于解析TypeScript文件中的React组件信息</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span> <span class="token comment">// 一个常用的JavaScript工具库，这里用于检查对象是否为空</span>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">'fs-extra'</span><span class="token punctuation">;</span> <span class="token comment">// 一个扩展了Node.js内置fs模块的库，提供了更多便利的文件操作API</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> transformProp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./transform'</span><span class="token punctuation">;</span> <span class="token comment">// 一个自定义的函数，用于转换属性信息</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Prop <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../schema/type'</span><span class="token punctuation">;</span> <span class="token comment">// 定义了属性（Prop）的数据结构</span>

<span class="token comment">// 创建TypeScript编译程序（Program），用于后续的类型检查和AST操作</span>
<span class="token keyword">function</span> <span class="token function">createProgram</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">filePath</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">workDir</span><span class="token operator">:</span> string<span class="token punctuation">;</span> tsconfigFileName<span class="token operator">?</span><span class="token operator">:</span> string <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> tsconfigFileName <span class="token operator">=</span> args<span class="token punctuation">.</span>tsconfigFileName <span class="token operator">||</span> <span class="token string">'tsconfig.json'</span><span class="token punctuation">;</span> <span class="token comment">// 如果没有指定tsconfig文件名，则默认为tsconfig.json</span>
  <span class="token keyword">const</span> tsConfigPath <span class="token operator">=</span> <span class="token function">findConfig</span><span class="token punctuation">(</span>tsconfigFileName<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">cwd</span><span class="token operator">:</span> args<span class="token punctuation">.</span>workDir <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在指定的工作目录中查找tsconfig.json文件</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tsConfigPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">在 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span>workDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 没有找到 tsconfig.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 读取并解析tsconfig.json文件</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> config<span class="token punctuation">,</span> error <span class="token punctuation">}</span> <span class="token operator">=</span> ts<span class="token punctuation">.</span><span class="token function">readConfigFile</span><span class="token punctuation">(</span>tsConfigPath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">filename</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">在 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span>workDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 不能加载 tsconfig.json，错误码 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, 错误信息 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>messageText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 解析tsconfig.json中的配置，并创建一个TypeScript程序</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> options<span class="token punctuation">,</span> errors <span class="token punctuation">}</span> <span class="token operator">=</span> ts<span class="token punctuation">.</span><span class="token function">parseJsonConfigFileContent</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> ts<span class="token punctuation">.</span>sys<span class="token punctuation">,</span> args<span class="token punctuation">.</span>workDir<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> tsConfigPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>errors<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> errors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> ts<span class="token punctuation">.</span><span class="token function">createProgram</span><span class="token punctuation">(</span><span class="token punctuation">[</span>filePath<span class="token punctuation">]</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建TypeScript程序，用于后续的类型检查和AST操作</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取默认导出的Symbol</span>
<span class="token keyword">function</span> <span class="token function">getExportDefaultSymbol</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">checker</span><span class="token operator">:</span> ts<span class="token punctuation">.</span>TypeChecker<span class="token punctuation">,</span> <span class="token literal-property property">node</span><span class="token operator">:</span> ts<span class="token punctuation">.</span>Node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> symbol <span class="token operator">=</span> checker<span class="token punctuation">.</span><span class="token function">getSymbolAtLocation</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>symbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> exportSymbols <span class="token operator">=</span> checker<span class="token punctuation">.</span><span class="token function">getExportsOfModule</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token literal-property property">exportDefaultSymbol</span><span class="token operator">:</span> ts<span class="token punctuation">.</span>Symbol <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> exportSymbols<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token literal-property property">sym</span><span class="token operator">:</span> ts<span class="token punctuation">.</span>Symbol <span class="token operator">=</span> exportSymbols<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>

      <span class="token comment">// 排除命名导出</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>sym<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      sym<span class="token punctuation">.</span>valueDeclaration <span class="token operator">=</span>
        sym<span class="token punctuation">.</span>valueDeclaration <span class="token operator">||</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>sym<span class="token punctuation">.</span>declarations<span class="token punctuation">)</span> <span class="token operator">?</span> sym<span class="token punctuation">.</span>declarations<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sym<span class="token punctuation">.</span>valueDeclaration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      exportDefaultSymbol <span class="token operator">=</span> sym<span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> exportDefaultSymbol<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取组件信息</span>
<span class="token keyword">function</span> <span class="token function">getComponentInfo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">filePath</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">workDir</span><span class="token operator">:</span> string<span class="token punctuation">;</span> tsconfigFileName<span class="token operator">?</span><span class="token operator">:</span> string <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> program <span class="token operator">=</span> <span class="token function">createProgram</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
  <span class="token keyword">const</span> sourceFile <span class="token operator">=</span> program<span class="token punctuation">.</span><span class="token function">getSourceFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sourceFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> checker <span class="token operator">=</span> program<span class="token punctuation">.</span><span class="token function">getTypeChecker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> exportDefaultSymbol <span class="token operator">=</span> <span class="token function">getExportDefaultSymbol</span><span class="token punctuation">(</span>checker<span class="token punctuation">,</span> sourceFile<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>exportDefaultSymbol<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> parser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parser</span><span class="token punctuation">(</span>program<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> parser<span class="token punctuation">.</span><span class="token function">getComponentInfo</span><span class="token punctuation">(</span>exportDefaultSymbol<span class="token punctuation">,</span> sourceFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 默认导出函数，用于解析文件并提取组件的属性信息</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">filePath</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">workDir</span><span class="token operator">:</span> string<span class="token punctuation">;</span> tsconfigFileName<span class="token operator">?</span><span class="token operator">:</span> string <span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">props</span><span class="token operator">:</span> Prop<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>filePath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> componentInfo <span class="token operator">=</span> <span class="token function">getComponentInfo</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>componentInfo <span class="token operator">||</span> <span class="token operator">!</span>componentInfo<span class="token punctuation">.</span>props <span class="token operator">||</span> _<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>componentInfo<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> propsName <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>componentInfo<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token literal-property property">props</span><span class="token operator">:</span> Prop<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    propsName<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'aria-'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token literal-property property">item</span><span class="token operator">:</span> Prop <span class="token operator">=</span> <span class="token function">transformProp</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> componentInfo<span class="token punctuation">.</span>props<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          props<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> props <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br></div></div><p>主要功能是解析TypeScript文件中的React组件，提取其属性信息，并进行一些转换处理。它使用了react-docgen-typescript库来解析组件信息，lodash库来检查对象是否为空，以及fs-extra库来读取文件。代码中还定义了一些自定义函数，如transformProp，用于转换属性信息。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/architecture/framework/wujie.html" class="prev">
        iframe 微前端方案
      </a></span> <span class="next"><a href="/blog/architecture/framework/lowcode-engine.html">
        低代码引擎设计与实现
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----><!----></div></div>
    <script src="/blog/assets/js/app.d7ed97c7.js" defer></script><script src="/blog/assets/js/2.dec2e75d.js" defer></script><script src="/blog/assets/js/1.5b9e135c.js" defer></script><script src="/blog/assets/js/30.c5bb1b3d.js" defer></script><script src="/blog/assets/js/20.badbb211.js" defer></script>
  </body>
</html>
