<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>跨端技术通识 | 前端那些事儿</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/blog/logo.png">
    <link rel="manifest" href="/blog/manifest.json">
    <link rel="apple-touch-icon" href="/blog/images/icons/apple-icon-152x152.png">
    <meta name="description" content="我命由我不由天，学习吧少年">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/blog/assets/css/0.styles.f0017422.css" as="style"><link rel="preload" href="/blog/assets/js/app.2d92cdd6.js" as="script"><link rel="preload" href="/blog/assets/js/2.dec2e75d.js" as="script"><link rel="preload" href="/blog/assets/js/1.5b9e135c.js" as="script"><link rel="preload" href="/blog/assets/js/135.4fd6d2c9.js" as="script"><link rel="preload" href="/blog/assets/js/20.badbb211.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.cc7e09f3.js"><link rel="prefetch" href="/blog/assets/js/100.66333c9a.js"><link rel="prefetch" href="/blog/assets/js/101.22bb54e4.js"><link rel="prefetch" href="/blog/assets/js/102.12d8e7dd.js"><link rel="prefetch" href="/blog/assets/js/103.4eaf7e5a.js"><link rel="prefetch" href="/blog/assets/js/104.546bf695.js"><link rel="prefetch" href="/blog/assets/js/105.5bd606c3.js"><link rel="prefetch" href="/blog/assets/js/106.ed58c352.js"><link rel="prefetch" href="/blog/assets/js/107.86bb525f.js"><link rel="prefetch" href="/blog/assets/js/108.0d43865d.js"><link rel="prefetch" href="/blog/assets/js/109.76770490.js"><link rel="prefetch" href="/blog/assets/js/11.b60c9933.js"><link rel="prefetch" href="/blog/assets/js/110.def2da81.js"><link rel="prefetch" href="/blog/assets/js/111.437e19f6.js"><link rel="prefetch" href="/blog/assets/js/112.a97b06a0.js"><link rel="prefetch" href="/blog/assets/js/113.db4bdbbc.js"><link rel="prefetch" href="/blog/assets/js/114.a8f8f633.js"><link rel="prefetch" href="/blog/assets/js/115.c240027a.js"><link rel="prefetch" href="/blog/assets/js/116.e2e41299.js"><link rel="prefetch" href="/blog/assets/js/117.ad017d7c.js"><link rel="prefetch" href="/blog/assets/js/118.b03a96f9.js"><link rel="prefetch" href="/blog/assets/js/119.c6e1a5cf.js"><link rel="prefetch" href="/blog/assets/js/12.c53283e7.js"><link rel="prefetch" href="/blog/assets/js/120.99c725ef.js"><link rel="prefetch" href="/blog/assets/js/121.22f09230.js"><link rel="prefetch" href="/blog/assets/js/122.3461a142.js"><link rel="prefetch" href="/blog/assets/js/123.d40b5f76.js"><link rel="prefetch" href="/blog/assets/js/124.23ce6994.js"><link rel="prefetch" href="/blog/assets/js/125.f8c5ca4d.js"><link rel="prefetch" href="/blog/assets/js/126.e4c25686.js"><link rel="prefetch" href="/blog/assets/js/127.1da6c506.js"><link rel="prefetch" href="/blog/assets/js/128.19e7ea12.js"><link rel="prefetch" href="/blog/assets/js/129.17dd8e1d.js"><link rel="prefetch" href="/blog/assets/js/13.6bdc6b5d.js"><link rel="prefetch" href="/blog/assets/js/130.7d0c903d.js"><link rel="prefetch" href="/blog/assets/js/131.3e0de274.js"><link rel="prefetch" href="/blog/assets/js/132.aeb127bd.js"><link rel="prefetch" href="/blog/assets/js/133.c236699b.js"><link rel="prefetch" href="/blog/assets/js/134.ea6f26a3.js"><link rel="prefetch" href="/blog/assets/js/136.429ee24e.js"><link rel="prefetch" href="/blog/assets/js/137.ad081673.js"><link rel="prefetch" href="/blog/assets/js/138.8de94ba5.js"><link rel="prefetch" href="/blog/assets/js/139.796b7dd2.js"><link rel="prefetch" href="/blog/assets/js/14.c3201a23.js"><link rel="prefetch" href="/blog/assets/js/140.ab07fe27.js"><link rel="prefetch" href="/blog/assets/js/141.60cf82ce.js"><link rel="prefetch" href="/blog/assets/js/142.e0ff5608.js"><link rel="prefetch" href="/blog/assets/js/143.84c778fe.js"><link rel="prefetch" href="/blog/assets/js/144.897e105e.js"><link rel="prefetch" href="/blog/assets/js/145.6f138c1a.js"><link rel="prefetch" href="/blog/assets/js/146.b0e6b064.js"><link rel="prefetch" href="/blog/assets/js/147.46b031f2.js"><link rel="prefetch" href="/blog/assets/js/148.c161cdfc.js"><link rel="prefetch" href="/blog/assets/js/149.ce1a47f4.js"><link rel="prefetch" href="/blog/assets/js/15.a0b9e44e.js"><link rel="prefetch" href="/blog/assets/js/150.20d31db8.js"><link rel="prefetch" href="/blog/assets/js/151.0112bac1.js"><link rel="prefetch" href="/blog/assets/js/152.0fae3a42.js"><link rel="prefetch" href="/blog/assets/js/153.6e35b967.js"><link rel="prefetch" href="/blog/assets/js/154.28ed43f9.js"><link rel="prefetch" href="/blog/assets/js/155.5098d08a.js"><link rel="prefetch" href="/blog/assets/js/156.3dfb7be0.js"><link rel="prefetch" href="/blog/assets/js/157.f2a59024.js"><link rel="prefetch" href="/blog/assets/js/158.cb2b45d5.js"><link rel="prefetch" href="/blog/assets/js/159.62cebee3.js"><link rel="prefetch" href="/blog/assets/js/16.491191e4.js"><link rel="prefetch" href="/blog/assets/js/160.cc424b35.js"><link rel="prefetch" href="/blog/assets/js/161.4e0b6f98.js"><link rel="prefetch" href="/blog/assets/js/162.08656fce.js"><link rel="prefetch" href="/blog/assets/js/163.01f64c34.js"><link rel="prefetch" href="/blog/assets/js/164.dc9436f9.js"><link rel="prefetch" href="/blog/assets/js/165.349529bc.js"><link rel="prefetch" href="/blog/assets/js/166.496dc7c0.js"><link rel="prefetch" href="/blog/assets/js/167.3463c2ed.js"><link rel="prefetch" href="/blog/assets/js/168.7b0a3bec.js"><link rel="prefetch" href="/blog/assets/js/169.60fc1db1.js"><link rel="prefetch" href="/blog/assets/js/17.89ec8c57.js"><link rel="prefetch" href="/blog/assets/js/170.9971d5ae.js"><link rel="prefetch" href="/blog/assets/js/171.35d1ba8d.js"><link rel="prefetch" href="/blog/assets/js/172.c8619491.js"><link rel="prefetch" href="/blog/assets/js/173.7ed9f53a.js"><link rel="prefetch" href="/blog/assets/js/174.d83729c0.js"><link rel="prefetch" href="/blog/assets/js/175.58bd1d44.js"><link rel="prefetch" href="/blog/assets/js/176.bd20672b.js"><link rel="prefetch" href="/blog/assets/js/177.b029c4ac.js"><link rel="prefetch" href="/blog/assets/js/178.4b3c78c6.js"><link rel="prefetch" href="/blog/assets/js/179.c11070c0.js"><link rel="prefetch" href="/blog/assets/js/18.b91f1411.js"><link rel="prefetch" href="/blog/assets/js/180.7aa1d02c.js"><link rel="prefetch" href="/blog/assets/js/181.baa0a9c7.js"><link rel="prefetch" href="/blog/assets/js/182.f1aca5af.js"><link rel="prefetch" href="/blog/assets/js/183.3ab5abd4.js"><link rel="prefetch" href="/blog/assets/js/184.0b1eb3bf.js"><link rel="prefetch" href="/blog/assets/js/185.1d105f97.js"><link rel="prefetch" href="/blog/assets/js/186.4ee619cd.js"><link rel="prefetch" href="/blog/assets/js/187.8e78996f.js"><link rel="prefetch" href="/blog/assets/js/188.02a5b08d.js"><link rel="prefetch" href="/blog/assets/js/189.40134a0c.js"><link rel="prefetch" href="/blog/assets/js/19.cb1f17c8.js"><link rel="prefetch" href="/blog/assets/js/190.8cfcd1a7.js"><link rel="prefetch" href="/blog/assets/js/191.ef567369.js"><link rel="prefetch" href="/blog/assets/js/192.b4c80d13.js"><link rel="prefetch" href="/blog/assets/js/193.c3c61ed0.js"><link rel="prefetch" href="/blog/assets/js/194.d17a7216.js"><link rel="prefetch" href="/blog/assets/js/195.bf09c6f2.js"><link rel="prefetch" href="/blog/assets/js/196.a655cba5.js"><link rel="prefetch" href="/blog/assets/js/197.77bb24de.js"><link rel="prefetch" href="/blog/assets/js/198.aa4e93ec.js"><link rel="prefetch" href="/blog/assets/js/199.ad5c151a.js"><link rel="prefetch" href="/blog/assets/js/200.1748ffa7.js"><link rel="prefetch" href="/blog/assets/js/201.daa2af93.js"><link rel="prefetch" href="/blog/assets/js/202.12273605.js"><link rel="prefetch" href="/blog/assets/js/203.dc92157f.js"><link rel="prefetch" href="/blog/assets/js/204.613d1840.js"><link rel="prefetch" href="/blog/assets/js/205.062c138c.js"><link rel="prefetch" href="/blog/assets/js/206.a9d554af.js"><link rel="prefetch" href="/blog/assets/js/207.500b316a.js"><link rel="prefetch" href="/blog/assets/js/208.bddce877.js"><link rel="prefetch" href="/blog/assets/js/209.e2e1511c.js"><link rel="prefetch" href="/blog/assets/js/21.bf0041b7.js"><link rel="prefetch" href="/blog/assets/js/210.2514251c.js"><link rel="prefetch" href="/blog/assets/js/211.8e9ab64a.js"><link rel="prefetch" href="/blog/assets/js/212.ef0c8e8d.js"><link rel="prefetch" href="/blog/assets/js/213.595fa9f9.js"><link rel="prefetch" href="/blog/assets/js/214.4497aa4b.js"><link rel="prefetch" href="/blog/assets/js/215.94b5d0e9.js"><link rel="prefetch" href="/blog/assets/js/216.67c7bbb1.js"><link rel="prefetch" href="/blog/assets/js/217.55493374.js"><link rel="prefetch" href="/blog/assets/js/218.290d84a2.js"><link rel="prefetch" href="/blog/assets/js/219.afad10dd.js"><link rel="prefetch" href="/blog/assets/js/22.48390d4f.js"><link rel="prefetch" href="/blog/assets/js/220.dab576c3.js"><link rel="prefetch" href="/blog/assets/js/221.d225fbad.js"><link rel="prefetch" href="/blog/assets/js/222.f2a7c0a3.js"><link rel="prefetch" href="/blog/assets/js/223.2ac48627.js"><link rel="prefetch" href="/blog/assets/js/224.1323cb6b.js"><link rel="prefetch" href="/blog/assets/js/225.60d5dfc5.js"><link rel="prefetch" href="/blog/assets/js/226.0b86045d.js"><link rel="prefetch" href="/blog/assets/js/227.4e115357.js"><link rel="prefetch" href="/blog/assets/js/23.35c4ba93.js"><link rel="prefetch" href="/blog/assets/js/24.cc3b12df.js"><link rel="prefetch" href="/blog/assets/js/25.632a83cc.js"><link rel="prefetch" href="/blog/assets/js/26.da0d7951.js"><link rel="prefetch" href="/blog/assets/js/27.ee3c36ec.js"><link rel="prefetch" href="/blog/assets/js/28.0153f1f9.js"><link rel="prefetch" href="/blog/assets/js/29.2b84a9e0.js"><link rel="prefetch" href="/blog/assets/js/3.cb0627fa.js"><link rel="prefetch" href="/blog/assets/js/30.aaaa0ddd.js"><link rel="prefetch" href="/blog/assets/js/31.d9754d97.js"><link rel="prefetch" href="/blog/assets/js/32.7ad5cf3f.js"><link rel="prefetch" href="/blog/assets/js/33.b8fe4d45.js"><link rel="prefetch" href="/blog/assets/js/34.7785bbc9.js"><link rel="prefetch" href="/blog/assets/js/35.6df90aed.js"><link rel="prefetch" href="/blog/assets/js/36.021ffa37.js"><link rel="prefetch" href="/blog/assets/js/37.ff149f3c.js"><link rel="prefetch" href="/blog/assets/js/38.2342dc69.js"><link rel="prefetch" href="/blog/assets/js/39.0cc541d4.js"><link rel="prefetch" href="/blog/assets/js/4.cbb57fa7.js"><link rel="prefetch" href="/blog/assets/js/40.fcc30544.js"><link rel="prefetch" href="/blog/assets/js/41.71b6602b.js"><link rel="prefetch" href="/blog/assets/js/42.86486c3a.js"><link rel="prefetch" href="/blog/assets/js/43.6e3e8427.js"><link rel="prefetch" href="/blog/assets/js/44.1345e302.js"><link rel="prefetch" href="/blog/assets/js/45.26496370.js"><link rel="prefetch" href="/blog/assets/js/46.64e986d2.js"><link rel="prefetch" href="/blog/assets/js/47.7cc6d891.js"><link rel="prefetch" href="/blog/assets/js/48.afad81d6.js"><link rel="prefetch" href="/blog/assets/js/49.13973115.js"><link rel="prefetch" href="/blog/assets/js/5.fe065607.js"><link rel="prefetch" href="/blog/assets/js/50.8eacd658.js"><link rel="prefetch" href="/blog/assets/js/51.93f1907c.js"><link rel="prefetch" href="/blog/assets/js/52.d1110e21.js"><link rel="prefetch" href="/blog/assets/js/53.228de271.js"><link rel="prefetch" href="/blog/assets/js/54.081bcb67.js"><link rel="prefetch" href="/blog/assets/js/55.b2101926.js"><link rel="prefetch" href="/blog/assets/js/56.a4f2369c.js"><link rel="prefetch" href="/blog/assets/js/57.720c92c3.js"><link rel="prefetch" href="/blog/assets/js/58.4492060e.js"><link rel="prefetch" href="/blog/assets/js/59.dbb9db10.js"><link rel="prefetch" href="/blog/assets/js/6.68cda050.js"><link rel="prefetch" href="/blog/assets/js/60.8ed2d54c.js"><link rel="prefetch" href="/blog/assets/js/61.c4a29adc.js"><link rel="prefetch" href="/blog/assets/js/62.5f91957c.js"><link rel="prefetch" href="/blog/assets/js/63.fd1f1910.js"><link rel="prefetch" href="/blog/assets/js/64.95ce3e2f.js"><link rel="prefetch" href="/blog/assets/js/65.326c8e40.js"><link rel="prefetch" href="/blog/assets/js/66.1c6da0aa.js"><link rel="prefetch" href="/blog/assets/js/67.208b4e9d.js"><link rel="prefetch" href="/blog/assets/js/68.21b85d45.js"><link rel="prefetch" href="/blog/assets/js/69.6858b2d2.js"><link rel="prefetch" href="/blog/assets/js/7.3b8d63a0.js"><link rel="prefetch" href="/blog/assets/js/70.b65b7e4e.js"><link rel="prefetch" href="/blog/assets/js/71.fcaff435.js"><link rel="prefetch" href="/blog/assets/js/72.03656408.js"><link rel="prefetch" href="/blog/assets/js/73.8f2b96ac.js"><link rel="prefetch" href="/blog/assets/js/74.86415571.js"><link rel="prefetch" href="/blog/assets/js/75.21116ce6.js"><link rel="prefetch" href="/blog/assets/js/76.eaba3b1d.js"><link rel="prefetch" href="/blog/assets/js/77.0a1e2783.js"><link rel="prefetch" href="/blog/assets/js/78.cb37ea91.js"><link rel="prefetch" href="/blog/assets/js/79.0f4aac22.js"><link rel="prefetch" href="/blog/assets/js/80.6a6b99e8.js"><link rel="prefetch" href="/blog/assets/js/81.7f75a272.js"><link rel="prefetch" href="/blog/assets/js/82.df94bff3.js"><link rel="prefetch" href="/blog/assets/js/83.45d90d60.js"><link rel="prefetch" href="/blog/assets/js/84.7411273d.js"><link rel="prefetch" href="/blog/assets/js/85.4adfb728.js"><link rel="prefetch" href="/blog/assets/js/86.6eff42ed.js"><link rel="prefetch" href="/blog/assets/js/87.9e1bb7e2.js"><link rel="prefetch" href="/blog/assets/js/88.8b840ce1.js"><link rel="prefetch" href="/blog/assets/js/89.c832b6da.js"><link rel="prefetch" href="/blog/assets/js/90.29696e02.js"><link rel="prefetch" href="/blog/assets/js/91.98969b7f.js"><link rel="prefetch" href="/blog/assets/js/92.e94d0ec0.js"><link rel="prefetch" href="/blog/assets/js/93.41e7378a.js"><link rel="prefetch" href="/blog/assets/js/94.4505ec5d.js"><link rel="prefetch" href="/blog/assets/js/95.76007605.js"><link rel="prefetch" href="/blog/assets/js/96.9c73ab54.js"><link rel="prefetch" href="/blog/assets/js/97.afada7da.js"><link rel="prefetch" href="/blog/assets/js/98.910afb80.js"><link rel="prefetch" href="/blog/assets/js/99.79cab625.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.bd3cdb54.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.f0017422.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.png" alt="前端那些事儿" class="logo"> <span class="site-name can-hide">前端那些事儿</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/base/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/blog/devops/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/blog/mobile/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  泛客户端
</a></div><div class="nav-item"><a href="/blog/architecture/" class="nav-link">
  架构与方案
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jonny-wei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/jonny-wei/sushi-js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS 寿司
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/base/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/blog/devops/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/blog/mobile/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  泛客户端
</a></div><div class="nav-item"><a href="/blog/architecture/" class="nav-link">
  架构与方案
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/jonny-wei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/jonny-wei/sushi-js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS 寿司
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>跨端技术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/mobile/" aria-current="page" class="active sidebar-link">跨端技术通识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/mobile/#主流跨端方案" class="sidebar-link">主流跨端方案</a></li><li class="sidebar-sub-header"><a href="/blog/mobile/#了解-rn-原生渲染" class="sidebar-link">了解 RN 原生渲染</a></li><li class="sidebar-sub-header"><a href="/blog/mobile/#了解-fultter-自渲染引擎" class="sidebar-link">了解 Fultter 自渲染引擎</a></li></ul></li><li><a href="/blog/mobile/h5/webview.html" class="sidebar-link">WebView</a></li><li><a href="/blog/mobile/h5/jsbridge.html" class="sidebar-link">JSBridge</a></li><li><a href="/blog/mobile/h5/mobile-fit.html" class="sidebar-link">H5 移动端适配</a></li><li><a href="/blog/mobile/h5/web-worker.html" class="sidebar-link">Web Worker</a></li><li><a href="/blog/mobile/h5/rn.html" class="sidebar-link">RN 新架构</a></li><li><a href="/blog/mobile/h5/rn-fabric.html" class="sidebar-link">RN Fabric 渲染系统</a></li><li><a href="/blog/mobile/h5/rn-multithreads.html" class="sidebar-link">RN 多线程与渲染</a></li><li><a href="/blog/mobile/h5/rn-metro.html" class="sidebar-link">Metro Bundler</a></li><li><a href="/blog/mobile/h5/rn-code-push.html" class="sidebar-link">Code Push 热更新</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>小程序</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/mobile/mini/framework.html" class="sidebar-link">双线程架构</a></li><li><a href="/blog/mobile/mini/render.html" class="sidebar-link">数据通信与渲染</a></li><li><a href="/blog/mobile/mini/page.html" class="sidebar-link">页面管理与跳转</a></li><li><a href="/blog/mobile/mini/security.html" class="sidebar-link">安全管控与登录</a></li><li><a href="/blog/mobile/mini/taro.html" class="sidebar-link">Taro Next</a></li><li><a href="/blog/mobile/mini/performance.html" class="sidebar-link">小程序性能优化</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="跨端技术通识"><a href="#跨端技术通识" class="header-anchor">#</a> 跨端技术通识</h1> <p>write once, run everywhere。一次编写，四处运行就是跨端的真谛。跨端的基本原理是跨端引擎需要实现一个渲染引擎、实现一个 vm，基于这套架构实现各种组件和 api，跨端容器上层对接一个 ui 框架，再上层的业务代码可以基于容器的 api 实现跨端的渲染和逻辑。跨平台和跨端的区别在于跨平台是指跨操作系统，而跨端则是指跨客户端。</p> <h2 id="主流跨端方案"><a href="#主流跨端方案" class="header-anchor">#</a> 主流跨端方案</h2> <h3 id="web-渲染"><a href="#web-渲染" class="header-anchor">#</a> Web 渲染</h3> <p>浏览器本就是一个跨端实现方案，因为你只需要输入网址，就能在任何端的浏览器上打开你的网页。那么，如果我们把浏览器嵌入 <code>app</code> 中，再将地址栏等内容隐藏掉，是不是就能将我们的网页嵌入原生 <code>app</code> 了。而这个嵌入 <code>app</code> 的浏览器，我们把它称之为 <code>webview</code> ，所以只要某个端支持 <code>webview</code> ，那么它就能使用这种方案跨端。同时这也是开发成本最小的一种方案。</p> <p>使用原生 <code>WebView</code> 控件渲染 HTML 页面，并在原生应用中定义可供 H5 页面访问原生部分能力的接口 <code>JSBridge</code>，从而实现 H5 和 Native 双向通信，也使得 H5 的能力向端侧进一步扩展。</p> <p>Web 渲染方案本质上是依托原生应用的内嵌浏览器控件 <code>WebView</code> 去渲染 H5 页面，因此 h5 App 的渲染流水线和 Web 页面渲染相一致，能力也局限在 <code>WebView</code> 这一沙箱。</p> <p>Web 渲染方案的性能瓶颈和 Web 页面开发中遇到的类似，即<strong>首屏渲染优化问题</strong>（白屏），同时多出了一个 <strong>WebView 初始化问题</strong>。</p> <ul><li><p>针对资源加载所带来的白屏问题，业界又提出了<strong>离线包的优化方案</strong>。所谓离线包机制，大体思路就是将原有从线上加载 H5 应用，提前下发到本地，通过 FileIO 或是内存等方式直接进行页面渲染，达到接近原生的用户体验。</p></li> <li><p>对于 WebView 初始化所带来的性能开销，不少公司针对自身的 APP 进行<strong>内核的定制化改造</strong>，诸如腾讯的 X5 内核以及阿里 UC 技术团队的 UCWebView 等。</p></li></ul> <p>在这基础上业内又提出 <strong>H5 容器</strong>的技术解决方案，H5 容器提供丰富的内置 JSAPI，增强版的 WebView 控件以及插件机制等能力，对原始版本的方案做了进一步功能高内聚和模块低耦合。</p> <h3 id="原生渲染"><a href="#原生渲染" class="header-anchor">#</a> 原生渲染</h3> <p>典型的代表是 <code>React Native</code> 和 <code>Weex</code>。</p> <p>Web 渲染方案的致命弱点在于无法出色地完成高性能和体验的目标，但是其良好的社区生态、跨平台一致性和高研发效率都是其无法忽视的优势，那么如何做到二者的平衡，答案就是原生渲染方案。</p> <p>原生渲染方案的基本思路是在 UI 层采用前端框架，然后通过 JavaScript 引擎解析 JS 代码，JS 代码通过 Bridge 层调用原生组件和能力，不同于一般 <code>react</code> 应用，它需要借助原生的能力来进行渲染，组件最终都会被渲染为原生组件，这可以给用户带来比较好的体验。</p> <h3 id="自渲染引擎渲染"><a href="#自渲染引擎渲染" class="header-anchor">#</a> 自渲染引擎渲染</h3> <p>典型代表就是 <code>flutter</code>。自渲染引擎渲染有别于 Web 渲染采用 WebView 容器进行渲染 UI、原生渲染通过 Bridge 方式转化为原生控件渲染 UI 等方案。它并没有直接借用原生能力去渲染组件，而是利用了更底层的渲染能力，直接从底层渲染上实现 UI 的绘制。这种方式显然链路会比上述方案的链路跟短，那么性能也就会更好，同时在保证多端渲染一致性上也会比上一种方案更加可靠 。</p> <h3 id="小程序另类跨端"><a href="#小程序另类跨端" class="header-anchor">#</a> 小程序另类跨端</h3> <p>小程序采用的技术手段仍脱离不了 Web 渲染方案，即采用 WebView 作为渲染引擎、JSBridge 的封装和离线包机制等，但是其最大创新之处在于将渲染层和逻辑层进行了分离，提供一个干净纯粹的 JavaScript 运行时，多 WebView 的架构使得用户体验进一步逼近原生体验。</p> <p>小程序的渲染层和逻辑层分别由两个线程管理，渲染层采用 WebView 进行页面渲染（iOS 使用 UIWebView/WKWebView，Android 使用 WebView），小程序的多页面也由多 WebView 接管。逻辑层从 WebView 分离，使用 JavaScript 引擎（iOS 使用 JavaScriptCore，Android 使用 V8）单独开启一个 Worker 线程去执行 JavaScript 代码。逻辑层和渲染层之间的通信经由 Native 层中转，网络 IO 也通过 Native 层进行转发。</p> <p>和之前的 Web 渲染技术相比较来看，小程序采用多 WebView + 双线程模型的架构。由多 WebView 构成的视图层为页面性能赋予更加接近原生的用户体验，单个 WebView 承载更加轻量的页面渲染任务，JavaScript 脚本单独抽离在 Worker 线程限制了开发者直接操作页面的能力，进一步约束在微信小程序的规范下，这也是小程序无法直接操作 DOM 的缘由。</p> <p>这里多提一点的是，小程序的组件分为原生组件和非原生组件，对于原生组件而言，这就脱离的 Web 渲染方案的范畴，属于原生渲染方案的一部分，所以从这点上看，小程序也可以算得上是 Web 渲染和原生渲染的融合解决方案。综上来看，Web 渲染跨平台方案经历了三个阶段性的发展，从原始时期的 h5 + JSBridge + WebView，到 h5 容器的抽象提升，再到目前如火如荼的小程序。不难看出，Web 渲染方案的有如下特点：</p> <ul><li><p>开发效率高。采用 Web 技术，技术门槛相对较低，技术人员积累丰厚，社区资源丰富，对前端友好，一次开发，多端运行</p></li> <li><p>动态化好。Web 技术的天然动态特性支持，无需发版</p></li> <li><p>表现一致性佳。Web 页面除了个别元素和属性的差异、多屏适配外，其双端表现相对一致</p></li> <li><p>性能较差。页面采用 WebView 渲染，页面加载耗时长，功能受限于沙箱，能力有限，难以承接复杂交互或是需要高性能的任务，整体用户体验差</p></li></ul> <p>现在许多大厂都有一套自己的小程序实现，但相互之间还是有不小差异的，通常可以借助 <code>taro</code> ，<code>uni-app</code>，<code>remax</code> 这类框架实现一套代码，多端运行的效果，这也算是一种另类的跨端。</p> <h2 id="了解-rn-原生渲染"><a href="#了解-rn-原生渲染" class="header-anchor">#</a> 了解 RN 原生渲染</h2> <h3 id="整体架构"><a href="#整体架构" class="header-anchor">#</a> 整体架构</h3> <p>React Native 的整体架构图如下：</p> <p><img src="/blog/images/mobile/cross1.png" alt="cross1"></p> <ul><li>React 层：利用 React 框架进行 UI 的数据描述，开发者使用 Class Component 或 Function Component 进行页面开发，框架内部将会把页面描述转化为 ReactElement 这一代表的虚拟 DOM 的数据结构，用于运行时的 Diff 对比和消息收发等。</li> <li>JS Bundle 中间产物：React Native 通过 metro 打包功能直接将整个 RN 应用打包为一个 JSBundle，通过 Bridge 层在 RN 应用初始化时加载整个 JS 包进来</li> <li>Bridge 层：Bridge 是连接 React 和 Native 的中间层，React 层的 UI 需要通过 Bridge 层的 UIManager 接口实现原生控件的创建和更新，通过 NativeModules 接口实现原生能力的调用</li> <li>Native 层：在 Native 层中，Native Modules 实现了与上层交互的原生能力接口，Native UI 实现终端实际的控件展示，Yoga 跨平台布局引擎实现了基于 Flexbox 布局系统的 JS 和 Native 的镜像映射关系。</li></ul> <p>值得注意的是，整个 RN 架构中，存在以下 UI 视图数据结构：</p> <p><img src="/blog/images/mobile/cross2.png" alt="cross2"></p> <h3 id="rn-运行机制"><a href="#rn-运行机制" class="header-anchor">#</a> RN 运行机制</h3> <p>下面从线程模型角度，分析一下 RN 的运行机制：</p> <p><img src="/blog/images/mobile/cross3.png" alt="cross3"></p> <ul><li>UI 线程：应用的主线程，主要负责原生渲染和调用原生能力，用于处理原生控件的绘制。</li> <li>JS 线程：解释执行 JS 代码。在大多数情况下，<code>react native</code> 使用的 js 引擎是 <code>JSC</code>(JavaScriptCore) ；在使用 chrome 调试时，所有的 js 代码都运行在 chrome 中，并且通过 <code>websocket</code> 与原生代码通信。此时的运行环境是 <code>v8</code>。</li> <li>Shadow 线程：主要用于构建 JS 与原生控件的布局镜像数据。渲染界面的重要步骤就是布局，布局需要知道每个组件应该渲染到什么位置，这个过程是通过 <code>yoga</code> 去实现的，这是一个基于 <code>flexbox</code> 的跨平台布局引擎。<code>shadow thread</code> 会维护一个 <code>shadow tree</code> 来计算我们的各个组件在 native 页面的实际布局，然后通过 <code>bridge</code> 通知 <code>native thread</code> 渲染 ui。</li> <li>Native Modules 线程：提供原生能力，这里采用的是多线程模型，iOS 端通过 <code>GCD</code> 实现，Android 端通过 <code>AsyncTask</code> 实现。</li></ul> <h4 id="初始化流程"><a href="#初始化流程" class="header-anchor">#</a> 初始化流程</h4> <ol><li><code>native</code> 启动一个原生界面，比如<code>android</code>会起一个新的<code>activity</code>来承载<code>rn</code>，并做一些初始化的操作。</li> <li>加载 <code>js</code> 引擎，运行 <code>js</code> 代码，此时的流程和 <code>react</code> 的启动流程就非常相似了，只不过我们在<code>js</code>层是无法拿到真实结点。</li> <li><code>js</code> 线程通知<code>shadow thread</code>。在<code>react</code>中，走到<code>createInstance</code>以后我们就可以直接调用<code>createElement</code>来创建真实结点了，但是在<code>rn</code>中我们没办法做到这一步，所以我们会通知<code>native</code>层让它来帮助我们创建一个对应的真实结点。</li> <li><code>shadow thread</code> 计算布局，通知<code>native Thread</code> 创建原生组件。</li> <li><code>native</code> 在界面上渲染原生组件，呈现给用户。</li></ol> <h4 id="更新流程"><a href="#更新流程" class="header-anchor">#</a> 更新流程</h4> <p>比如某个时候，用户点击了屏幕上的一个按钮触发了一个点击事件，此时界面需要进行相应的更新操作：</p> <ol><li><code>native</code> 获取到了点击事件，传给了<code>js thread</code></li> <li><code>js thread</code>根据 <code>react</code> 代码进行相应的处理，比如处理 <code>onClick</code> 函数，触发了 <code>setState</code>。</li> <li>和 <code>react</code> 的更新流程一样，触发了 <code>setState</code> 之后会进行 <code>diff</code>，找到需要更新的结点</li> <li>通知 <code>shadow thread</code></li> <li><code>shadow thread</code> 计算布局之后通知 <code>native thread</code> 进行真正的渲染。</li></ol> <p>RN 应用在 UI 线程进行初始化，初始化的内容包括加载 JSBundle、初始化 Native Modules 等原生能力模块、创建 JSC/Hermes JavaScript 引擎，执行 JS 代码。创建的 JS 引擎独立在一个 JS 线程，解释执行 React 代码，并将生成的布局或逻辑信息序列化后经由 Bridge 发送给 Native。</p> <p>React 代码中视图层的渲染通过 UIManager 调 createView/updateView 等方法，基于 Yoga 布局引擎创建对应的 shadowView；逻辑层中涉及原生能力调用的部分通过 RCTBridge 对象转发到相应的原生接口。Native 接收到 Bridge 层的消息，进行视图的更新或是功能处理。</p> <p>原生渲染方案通过直接接管渲染层的方案，弥补了 Web 渲染方法在性能和体验上的不足，同时在顶层采用类 Web 的语法集，将开发技术边界延展至 Web 领域，同时可以很好的复用当前前端主流 UI 框架 React/Vue 的繁荣生态系统。</p> <h3 id="rn-方案存在的问题"><a href="#rn-方案存在的问题" class="header-anchor">#</a> RN 方案存在的问题</h3> <p>虽然原生渲染方案有上述的优势，但是有一个致命的弱点就是 Native 层和 JS 层的通信所带来的性能瓶颈。一方面页面的更新和事件的响应经由 Native 触达 JS 层，再由 JS 层返回给 Native 层需要来回的时间成本，整个通信是一个**「异步」<strong>的过程。这样做好处就是各自之间不会有阻塞关系，比如 不会<code>native thread</code>因为<code>js thread</code>而阻塞渲染，给用户良好的体验。但是这种</strong>「异步」**也存在一个比较明显的问题：因为通信过程花费的时间比较长，所以在一些时效性要求较高场景上体验较差。另一方面数据的交互需要频繁进行序列化和反序列化的转换。因此，在一些 UI 线程和 JS 线程存在持续频繁交互的场景（动画、滚动）等，RN 表现就不尽如人意。</p> <p>比如长列表快速滚动的时候或者需要做一些跟手的动画，整个过程是这样的：</p> <ol><li><code>native thread</code>监听到了滚动事件，发送消息通知<code>js thread</code></li> <li><code>js thread</code> 处理滚动事件，如果需要修改 <code>state</code> 需要经过一层<code>js diff</code>，拿到最终需要更新的结点</li> <li><code>js thread</code> 通知 <code>shadow thread</code></li> <li><code>shadow thread</code> 通知 <code>native</code> 渲染</li></ol> <p>当用户操作过快的时候，就会导致界面来不及更新，进而导致在快速滑动的时候会出现白屏、卡顿的现象。</p> <h3 id="从-rn-看本质"><a href="#从-rn-看本质" class="header-anchor">#</a> 从 RN 看本质</h3> <p>知道了<code>rn</code>是如何实现的跨端，那么我们就可以来探究一下它本质上是在干什么。首先，跨端可以分为 <strong>逻辑跨端</strong> 和 <strong>渲染跨端</strong>：</p> <ul><li><p><strong>逻辑跨端</strong>：通常通过 <code>vm</code>来实现，例如利用 <code>v8</code> 引擎，我们就能在各个平台上运行我们的 <code>js</code> 代码，实现逻辑跨端。</p></li> <li><p><strong>渲染跨端</strong>：把业务代码的实现抽象为开发层，比如 <code>react-native</code> 中我们写的 <code>react</code> 代码就属于开发层，再把具体要渲染的端称为渲染层。作为开发层来说，我一定知道我想要的<code>ui</code>长什么样，但是我没有能力去渲染到界面上，所以当我声明了一个组件之后，我们需要考虑的问题是如何把我想要什么告诉渲染层。最直观的方式肯定是我能够实现一种通信方式，在开发层将消息通知到各个系统，再由各个系统自己去调用对应的 <code>api</code> 来实现最终的渲染。这一部分的工作就是跨端框架需要帮助我们做的，它可以把这一步放到 <code>JS</code> 层，也可以把这一步放到<code>c++</code> 层。我们应该把这部分工作尽量往底层放，也就是我们可以对各个平台的 <code>api</code> 进行一层封装，上层只负责调用封装的 <code>api</code>，再由这一层封装层去调用真正的 <code>api</code>。</p></li></ul> <p>归根结底，所有跨端相关操作其实都在做：<strong>我知道我想要什么，但是我没有能力去渲染，我要通知有能力渲染的人来帮助我渲染</strong></p> <p><img src="/blog/images/mobile/cross4.png" alt="cross4"></p> <p>比如<code>hybrid</code>跨端方案中，<code>webview</code>其实就充当了桥接层的角色，<code>createElement</code>，<code>appendChild</code>等<code>api</code>就是给我们封装好的跨平台<code>api</code>，底层最终调用到了什么地方，又是如何渲染到界面上的细节都被屏蔽掉了。所以我们利用这些<code>api</code>就能很轻松的实现跨端开发，写一个网页，只要能够加载 <code>webview</code> 的地方，我们的代码就能跑在这个上面。</p> <p>又比如<code>flutter</code>的方案通过研发一个自渲染的引擎来实现跨端，这种思路是不是相当于另外一个浏览器？但是不同的点在于 <code>flutter</code> 是一个非常新的东西，而 <code>webview</code> 需要遵循大量的 <code>w3c</code> 规范和背负一堆历史包袱。<code>flutter</code> 并没有什么历史包袱，所以它能够从架构，设计的方面去做的更好更快，能够做更多的事情。</p> <h2 id="了解-fultter-自渲染引擎"><a href="#了解-fultter-自渲染引擎" class="header-anchor">#</a> 了解 Fultter 自渲染引擎</h2> <h3 id="整体架构-2"><a href="#整体架构-2" class="header-anchor">#</a> 整体架构</h3> <p>Flutter 的整体架构设计：</p> <p><img src="/blog/images/mobile/cross5.png" alt="cross5"></p> <p>Flutter 应用可以分为四层：</p> <ul><li><strong>Dart App 层</strong>：最顶层是 Dart App 层，以 Widget 为基本视图描述单元，构建起 UI 体系</li> <li><strong>Flutter Framework 层</strong>：内置基础的 Flutter 组件，并根据不同平台的视觉风格体系，封装 Material 和 Cupertino 两套 UI 库供上层使用</li> <li><strong>Flutter Engine 层</strong>：Flutter 框架的核心所在，包括 Dart 虚拟机、Skia 跨平台渲染引擎、文字排版、平台通道等，通过 Engine 层，建立起 Dart App 层和原生平台之间联系，从而实现二者的双向通信</li> <li><strong>Embedder 层</strong>：平台嵌入层为 Flutter App 提供宿主环境、线程创建以及基于插件机制的原生能力扩展等 Flutter 在打包的时候，将 Dart 业务代码和 Flutter Engine 代码基于 iOS/Android 不同平台分别进行打包。Native 在启动时会通过调用 C++ 的各自实现（Java 通过 JNI，OC 天然支持）初始化 Flutter Engine 层提供的接口，创建 UI/GPU/IO 三个线程和实例化 Dart VM。Dart 业务代码在 Release 模式下采用 AOT 的方式进行编译，并运行在 Dart VM 中。</li></ul> <h3 id="运行机制"><a href="#运行机制" class="header-anchor">#</a> 运行机制</h3> <p>Flutter 运行机制如下：</p> <p><img src="/blog/images/mobile/cross6.png" alt="cross6"></p> <ul><li>Platform 线程：Flutter 的主线程，由 Native 创建。负责平台 vsync 信号的回调注册，即当接收到从显示设备的 vsync 信号后，Platform 线程驱动 UI 线程的执行</li> <li>UI 线程：负责响应 vsync 信号，执行 Dart 层代码，驱动渲染管线的运行，将 Widget Tree 生成 Layer Tree 并提交给 GPU 线程做进一步处理</li> <li>GPU 线程：GPU 线程将 Layer Tree 转化为具体的绘制指令，并调用 skia 跨平台渲染引擎进行光栅化上屏</li> <li>IO 线程：主要负责请求图片资源并完成解码，然后将解码的图片生成纹理并传递给 GPU 线程。显示器在一帧 vblank 后，会向 GPU 发送 vsync 信号，Native 的 Plaform 线程接收到 vsync 信号后，执行绘制帧回调方法，即驱动 UI 线程进行 UI 绘制。</li></ul> <p>UI 线程中，Native 通过调用 C++ 的各自实现，将绘制指令通过 window 对象发送给 Dart 层，Dart 层会重构代表 UI 的数据树（Widget Tree，Element Tree 和 RenderObject Tree）并生成布局信息。根据布局信息生成一系列绘制指令的 Layer Tree，并通过 window 对象传递给 GPU 线程。</p> <p>Dart 层通过三棵树去描述 UI 的视图结构。</p> <ul><li>Widget Tree 是直接面向开发者的 UI 元素的配置信息，Widget 是 Immutable 的，如果 Widget 的状态发生更新，会发生重建。实际业务场景中，Widget 会频繁触发重建。</li> <li>Element Tree 是 Widget Tree 和 RenderObject Tree 的桥梁，当Widget 发生变化后，会将其 Element 标记为 Dirty Element，在下一次 vsync 信号到来时进行渲染。当 Widget 挂载到 Widget Tree 时，会调用 widget.createElement 方法，创建其对应的 Element，Flutter 再讲这个 Element 挂载到 Element Tree 并持有有创建它的 Widget 的引用</li> <li>RenderObject Tree 是真正执行组件布局渲染的工作，通过 RenderObjectToWidgetAdapter 这个 RenderObjectWidget 建立起 Widget 、Element 和 RenderObject 三者之间的联系</li></ul> <p>GPU 线程从 UI 线程获取 Layer Tree 构成的绘制指令，通过 Skia 这一跨平台渲染引擎进行光栅化，绘制成帧数据，将帧数据放在帧缓冲区，然后等待显示器上屏。综上来看，以 Flutter 为代表的的自建渲染引擎方案的优势在于：</p> <ul><li>UI 控件是直接采用 Skia 这一跨平台渲染引擎进行绘制。顶层使用 Dart 的语法进行 UI 的配置信息描述，并通过 Diff 算法优化渲染流程，生成 Layer Tree 后，再调用 C++ 的代码将布局信息发送给 Flutter Engine，Flutter Engine 直接通过 Skia 将 UI 控件绘制上屏。这里与原生渲染方案最大的不同点在于，Native 应用仅作为宿主环境，UI 控件不需要转化为原生控件，直接采用渲染引擎进行绘制，从而保证了双端的一致性和良好的性能与体验。</li> <li>Dart 在 Release下采用 AOT 的 编译模式。Dart 代码在 Release 采用 AOT 的编译模式转化为二进制代码，从而在 Dart 运行时环境中执行效率更高，性能也更为卓越。对比 React Native 来说，由于打包的是 JSBundle，所以在运行时仍是基于 JavaScript 运行时进行解释执行 JS 代码，因而产生较大的性能瓶颈。</li> <li>UI 层与原生层的数据交换性能更高</li></ul> <p><a href="https://mp.weixin.qq.com/s/G_2eBJyrr6FHm7WjI_MIPw" target="_blank" rel="noopener noreferrer">聊聊跨端技术的本质与现状<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://mp.weixin.qq.com/s/6UzhBRScBW67Ev95BK0ulg" target="_blank" rel="noopener noreferrer">跨平台解决方案的技术分析<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6966626823912308772#heading-11" target="_blank" rel="noopener noreferrer">跨平台方案、跨端引擎的本质<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://mp.weixin.qq.com/s/x07fhB1LT7L2Pq0yt34iqA" target="_blank" rel="noopener noreferrer">新一代Web技术栈的演进：SSR/SSG/ISR/DPR都在做什么<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://mp.weixin.qq.com/s/8R9S4C5Av5-C09wC7Cjzgw" target="_blank" rel="noopener noreferrer">React Native原理之跨端通信机制<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://mp.weixin.qq.com/s/QTHqQ-jaO7yPV-rQzAqglA" target="_blank" rel="noopener noreferrer">React Native 原理与实践<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://mp.weixin.qq.com/s/7FpdGEN0KJPtG0yR0zH62A" target="_blank" rel="noopener noreferrer">React-native源码解析<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://mp.weixin.qq.com/s/xxdgoEBIC3Bg4OCOZcm-aQ" target="_blank" rel="noopener noreferrer">超详解析Flutter渲染引擎<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/mobile/h5/webview.html">
        WebView
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----><!----></div></div>
    <script src="/blog/assets/js/app.2d92cdd6.js" defer></script><script src="/blog/assets/js/2.dec2e75d.js" defer></script><script src="/blog/assets/js/1.5b9e135c.js" defer></script><script src="/blog/assets/js/135.4fd6d2c9.js" defer></script><script src="/blog/assets/js/20.badbb211.js" defer></script>
  </body>
</html>
